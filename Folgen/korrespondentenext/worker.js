!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=45)}([,function(t,e,n){"use strict";e.a=function(t,e="",n="",r){let i={t:"event",ec:t,ea:e,el:n,ev:r,cd1:"{{clientId}}"};return console.info("ANALYTICS: event",i);o()(i)},e.b=function(t,e){let n=new URL(t),r={t:"pageview",dh:n.hostname,dp:n.pathname,dt:e,cd1:"{{clientId}}",dr:document.referrer};return console.info("ANALYTICS: pageview",r);o()(r)};var r=n(23),o=n.n(r);console.info("No analytics ID provided")},function(t,e,n){"use strict";e.b=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]]);return n},e.a=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function c(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(c,s)}a((r=r.apply(t,e||[])).next())})};Object.setPrototypeOf||Array;Object.assign},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n=Object.prototype.toString;t.exports=function(t){switch(n.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!=t?"nan":t&&1===t.nodeType?"element":typeof(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t))}},function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t.RunCommand="run-command"}(r||(r={}))},function(t,e,n){var r=n(4),o=n(7);function i(t,e){this.db=null,this.name=t,this.indexes={},this.opts=e,this.key=e.key||e.keyPath||void 0,this.increment=e.increment||e.autoIncretement||void 0}t.exports=i,i.prototype.index=function(t){return this.indexes[t]},i.prototype.put=function(t,e,n){var o=this.name,i=this.key;i&&("object"==r(t)?(n=e,e=t,t=null):e[i]=t),this.db.transaction("readwrite",[o],function(r,c){if(r)return n(r);var s=c.objectStore(o),a=i?s.put(e):s.put(e,t);c.onerror=c.onabort=a.onerror=n,c.oncomplete=function(){n(null,a.result)}})},i.prototype.get=function(t,e){var n=this.name;this.db.transaction("readonly",[n],function(r,o){if(r)return e(r);var i=o.objectStore(n).get(t);i.onerror=e,i.onsuccess=function(t){e(null,t.target.result)}})},i.prototype.del=function(t,e){var n=this.name;this.db.transaction("readwrite",[n],function(r,o){if(r)return e(r);var i=o.objectStore(n).delete(t);o.onerror=o.onabort=i.onerror=e,o.oncomplete=function(){e()}})},i.prototype.count=function(t){var e=this.name;this.db.transaction("readonly",[e],function(n,r){if(n)return t(n);var o=r.objectStore(e).count();o.onerror=t,o.onsuccess=function(e){t(null,e.target.result)}})},i.prototype.clear=function(t){var e=this.name;this.db.transaction("readwrite",[e],function(n,r){if(n)return t(n);var o=r.objectStore(e).clear();r.onerror=r.onabort=o.onerror=t,r.oncomplete=function(){t()}})},i.prototype.batch=function(t,e){var n=this.name,r=this.key,o=Object.keys(t);this.db.transaction("readwrite",[n],function(i,c){if(i)return e(i);var s=c.objectStore(n),a=0;c.onerror=c.onabort=e,c.oncomplete=function(){e()},function n(){if(a>=o.length)return;var i=o[a];var c=t[i];var u;null===c?u=s.delete(i):r?(c[r]||(c[r]=i),u=s.put(c)):u=s.put(c,i);u.onerror=e;u.onsuccess=n;a+=1}()})},i.prototype.all=function(t){var e=[];this.cursor({iterator:function(t){e.push(t.value),t.continue()}},function(n){n?t(n):t(null,e)})},i.prototype.cursor=function(t,e){var n=this.name;this.db.transaction("readonly",[n],function(r,i){if(r)return e(r);var c=(t.index?i.objectStore(n).index(t.index):i.objectStore(n)).openCursor(o(t.range));c.onerror=e,c.onsuccess=function(n){var r=n.target.result;r?t.iterator(r):e()}})}},function(t,e,n){"use strict";(function(r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=r.IDBKeyRange||r.webkitIDBKeyRange;if(t instanceof e)return t;if(void 0===t||null===t)return null;if(!(0,c.default)(t))return e.only(t);var n=Object.keys(t).sort();if(1===n.length){var o=n[0],i=t[o];switch(o){case"eq":return e.only(i);case"gt":return e.lowerBound(i,!0);case"lt":return e.upperBound(i,!0);case"gte":return e.lowerBound(i);case"lte":return e.upperBound(i);default:throw new TypeError('"'+o+'" is not valid key')}}else{var s=t[n[0]],a=t[n[1]],u=n.join("-");switch(u){case"gt-lt":return e.bound(s,a,!0,!0);case"gt-lte":return e.bound(s,a,!0,!1);case"gte-lt":return e.bound(s,a,!1,!0);case"gte-lte":return e.bound(s,a,!1,!1);default:throw new TypeError('"'+u+'" are conflicted keys')}}};var o,i=n(22),c=(o=i)&&o.__esModule?o:{default:o};t.exports=e.default}).call(e,n(3))},function(t,e,n){var r=n(7);function o(t,e,n,r){this.store=t,this.name=e,this.field=n,this.opts=r,this.multi=r.multi||r.multiEntry||!1,this.unique=r.unique||!1}t.exports=o,o.prototype.get=function(t,e){var n=[],r=this.unique,o={range:t,iterator:function(t){n.push(t.value),t.continue()}};this.cursor(o,function(t){if(t)return e(t);e(null,r?n[0]:n)})},o.prototype.count=function(t,e){var n=this.store.name,o=this.name;this.store.db.transaction("readonly",[n],function(i,c){if(i)return e(i);var s=c.objectStore(n).index(o).count(r(t));s.onerror=e,s.onsuccess=function(t){e(null,t.target.result)}})},o.prototype.cursor=function(t,e){t.index=this.name,this.store.cursor(t,e)}},function(t,e,n){const r=n(10),o=n(11),i=n(24),c=n(12),s=n(32);t.exports={add(t){if(!o.GA_ID)throw new Error("No analytics ID provided. Cannot log call.");return i().then(e=>{let n=Object.assign({},t,{v:1,tid:o.GA_ID,cid:e,aip:1});for(var i in n)if(n.hasOwnProperty(i)){var c=n[i];"string"==typeof c&&(n[i]=c.replace("{{clientId}}",e).replace("{{platform}}",s()))}return r.store("analyticsPings").put({call:n,timestamp:Date.now()})})},getAllPendingCalls:()=>r.store("analyticsPings").all().then(t=>t.map(t=>(t.call.qt=Date.now()-t.timestamp,{call:t.call,id:t.id}))),deleteEvents(t){let e=t.map(t=>t.id);return Promise.resolve(e).then(c(t=>r.store("analyticsPings").del(t)))}}},function(t,e,n){const r=n(15);["get","put","all","count","del"].forEach(t=>{let e=r.Store.prototype[t];r.Store.prototype[t]=function(){return new Promise((t,n)=>{let r=Array.from(arguments);r.push((e,r)=>{e?n(e):t(r)}),e.apply(this,r)})}});const o=r.schema().version(1).addStore("analyticsPings",{key:"id",increment:!0}).addStore("clientGuid",{key:"name"}),i=r("google-analytics-protocol",o);t.exports=i},function(t,e){t.exports={}},function(t,e,n){const r=n(26),o=n(27);t.exports=function(t,e){return o.equal(typeof t,"function"),function(n){return n=Array.isArray(n)?n:[n],r.all(n.map(t,e))}}},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,c,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),a=1;a<arguments.length;a++){for(var u in n=Object(arguments[a]))o.call(n,u)&&(s[u]=n[u]);if(r){c=r(n);for(var f=0;f<c.length;f++)i.call(n,c[f])&&(s[c[f]]=n[c[f]])}}return s}},function(t,e,n){"use strict";var r=n(16);n.d(e,"b",function(){return r.a});var o=n(17);n.d(e,"a",function(){return o.a})},function(t,e,n){(function(r){var o=n(4),i=n(21),c=n(6),s=n(8);function a(t,e){if(!(this instanceof a))return new a(t,e);if("string"!=o(t))throw new TypeError("`name` required");if(!(e instanceof i))throw new TypeError("not valid schema");this.name=t,this.status="close",this.origin=null,this.stores=e._stores,this.version=e.getVersion(),this.onupgradeneeded=e.callback(),Object.keys(this.stores).forEach(function(t){this.stores[t].db=this},this)}function u(){return r._indexedDB||r.indexedDB||r.msIndexedDB||r.mozIndexedDB||r.webkitIndexedDB}(e=t.exports=a).schema=i,e.cmp=function(){return u().cmp.apply(u(),arguments)},e.Treo=a,e.Schema=i,e.Store=c,e.Index=s,a.prototype.use=function(t){return t(this,e),this},a.prototype.drop=function(t){var e=this.name;this.close(function(n){if(n)return t(n);var r=u().deleteDatabase(e);r.onerror=t,r.onsuccess=function(){t()}})},a.prototype.close=function(t){if("close"==this.status)return t();this.getInstance(function(e,n){if(e)return t(e);n.origin=null,n.status="close",n.close(),t()})},a.prototype.store=function(t){return this.stores[t]},a.prototype.getInstance=function(t){if("open"==this.status)return t(null,this.origin);if("opening"==this.status)return this.queue.push(t);this.status="opening",this.queue=[t];var e=this,n=u().open(this.name,this.version);n.onupgradeneeded=this.onupgradeneeded,n.onerror=n.onblocked=function(t){e.status="error",e.queue.forEach(function(e){e(t)}),delete e.queue},n.onsuccess=function(t){e.origin=t.target.result,e.status="open",e.origin.onversionchange=function(){e.close(function(){})},e.queue.forEach(function(t){t(null,e.origin)}),delete e.queue}},a.prototype.transaction=function(t,e,n){this.getInstance(function(r,o){r?n(r):n(null,o.transaction(e,t))})}}).call(e,n(3))},function(t,e,n){"use strict";e.a=function(t,e){if("serviceWorker"in navigator==!1)throw new c;var n={name:t,data:e},r=new MessageChannel,i=function(){var t,e;return[new Promise(function(n,r){t=n,e=r}),t,e]}(),s=i[0],a=i[1],u=i[2];return r.port2.addEventListener("message",function(t){var e=t.data;e.error?u(new Error(e.error)):a(e.data),r.port2.close()}),r.port2.start(),navigator.serviceWorker.ready.then(function(t){return t.active.postMessage({action:o.a.RunCommand,command:n,respondOn:r.port1},[r.port1]),s})};var r,o=n(5),i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});var c=function(t){function e(){var n=t.call(this,"Service workers are not supported")||this;return Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(5),o=n(18),i=n.n(o),c=new(function(){function t(){this.boundFunctions={}}return t.prototype.processMessage=function(t){if(t.data&&t.data.action&&t.data.action===r.a.RunCommand){var e=t.data.command,n=t.data.respondOn,o=this.boundFunctions[e.name];o&&Promise.resolve(o(e.data)).then(function(t){return{data:t}}).catch(function(t){return{error:t.message}}).then(function(t){var e=[];i()(t,function(t){(t instanceof MessagePort||t instanceof ArrayBuffer)&&e.push(t)}),n.postMessage(t,e)})}},t.prototype.bind=function(t,e){if(this.boundFunctions[t])throw new Error("Command is already bound to "+t);this.boundFunctions[t]=e},t.prototype.listen=function(){self.addEventListener("message",this.processMessage.bind(this))},t}())},function(t,e,n){"use strict";var r=n(19);function o(t,e,n){n=n||"",Array.isArray(t)?function(t,e,n){var r="";t.forEach(function(t,i,c){r=n+"["+i+"]",e.call(c,t,i,c,r),o(c[i],e,r)})}(t,e,n):r(t)&&function(t,e,n){var r,i;for(r in t)i=n?n+"."+r:r,e.call(t,t[r],r,t,i),o(t[r],e,i)}(t,e,n)}t.exports=o},function(t,e,n){"use strict";var r=n(20);function o(t){return!0===r(t)&&"[object Object]"===Object.prototype.toString.call(t)}t.exports=function(t){var e,n;return!1!==o(t)&&("function"==typeof(e=t.constructor)&&(!1!==o(n=e.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},function(t,e,n){"use strict";t.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},function(t,e,n){var r=n(4),o=n(6),i=n(8);function c(){if(!(this instanceof c))return new c;this._stores={},this._current={},this._versions={}}t.exports=c,c.prototype.version=function(t){if("number"!=r(t)||t<1||t<this.getVersion())throw new TypeError("not valid version");return this._current={version:t,store:null},this._versions[t]={stores:[],dropStores:[],indexes:[],dropIndexes:[],version:t},this},c.prototype.addStore=function(t,e){if("string"!=r(t))throw new TypeError("`name` is required");if(this._stores[t])throw new TypeError("store is already defined");var n=new o(t,e||{});return this._stores[t]=n,this._versions[this.getVersion()].stores.push(n),this._current.store=n,this},c.prototype.dropStore=function(t){if("string"!=r(t))throw new TypeError("`name` is required");var e=this._stores[t];if(!e)throw new TypeError("store is not defined");return delete this._stores[t],this._versions[this.getVersion()].dropStores.push(e),this},c.prototype.addIndex=function(t,e,n){if("string"!=r(t))throw new TypeError("`name` is required");if("string"!=r(e)&&"array"!=r(e))throw new TypeError("`field` is required");var o=this._current.store;if(o.indexes[t])throw new TypeError("index is already defined");var c=new i(o,t,e,n||{});return o.indexes[t]=c,this._versions[this.getVersion()].indexes.push(c),this},c.prototype.dropIndex=function(t){if("string"!=r(t))throw new TypeError("`name` is required");var e=this._current.store.indexes[t];if(!e)throw new TypeError("index is not defined");return delete this._current.store.indexes[t],this._versions[this.getVersion()].dropIndexes.push(e),this},c.prototype.getStore=function(t){if("string"!=r(t))throw new TypeError("`name` is required");if(!this._stores[t])throw new TypeError("store is not defined");return this._current.store=this._stores[t],this},c.prototype.getVersion=function(){return this._current.version},c.prototype.callback=function(){var t=Object.keys(this._versions).map(function(t){return this._versions[t]},this).sort(function(t,e){return t.version-e.version});return function(e){var n=e.target.result,r=e.target.transaction;t.forEach(function(t){e.oldVersion>=t.version||(t.stores.forEach(function(t){var e={};void 0!==t.key&&(e.keyPath=t.key),void 0!==t.increment&&(e.autoIncrement=t.increment),n.createObjectStore(t.name,e)}),t.dropStores.forEach(function(t){n.deleteObjectStore(t.name)}),t.indexes.forEach(function(t){r.objectStore(t.store.name).createIndex(t.name,t.field,{unique:t.unique,multiEntry:t.multi})}),t.dropIndexes.forEach(function(t){r.objectStore(t.store.name).deleteIndex(t.name)}))})}}},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===r.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},function(t,e,n){const r=n(9),o=n(33),i=n(11);let c=!1;t.exports=function(t,e=!1){return i.GA_ID?r.add(t).then(()=>(t=>new Promise(e=>setTimeout(e,t)))(100)).then(()=>{let t=o();if(e)return t}):(!1===c&&(console.warn("Need to specify analytics ID with setAnalyticsID() before sending any calls. Will not send any in this session."),c=!0),console.info("Analytics call:",t),Promise.resolve())},t.exports.setAnalyticsID=function(t){i.GA_ID=t}},function(t,e,n){const r=n(10),o=n(25);t.exports=function(){return r.store("clientGuid").get("analytics-guid").then(t=>{if(t)return t.guid;let e=o();return r.store("clientGuid").put("analytics-guid",{guid:e}).then(()=>e)})}},function(t,e){const n=Math.log2||function(t){return Math.log(t)/Math.log(2)},r=function(){var t=null;if("undefined"!=typeof crypto?t=crypto:"undefined"!=typeof msCrypto&&(t=msCrypto),t&&t.getRandomValues){var e=function(r,o){var i=0,c=o-r;if(c<2)return r;var s=Math.ceil(n(c));if(s>53)throw new Exception("We cannot generate numbers larger than 53 bits.");var a=Math.ceil(s/8),u=Math.pow(2,s)-1,f=new Uint8Array(a);t.getRandomValues(f);for(var l=8*(a-1),p=0;p<a;p++)i+=f[p]*Math.pow(2,l),l-=8;return(i&=u)>=c?e(r,o):r+i};return function(){return e(0,1e9)/1e9}}return function(){return function(t){var e=0,n=0,r=0,o=1;0==t.length&&(t=[+new Date]);var i=function(){var t=4022871197,e=function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)};return e.version="Mash 0.9",e}();e=i(" "),n=i(" "),r=i(" ");for(var c=0;c<t.length;c++)(e-=i(t[c]))<0&&(e+=1),(n-=i(t[c]))<0&&(n+=1),(r-=i(t[c]))<0&&(r+=1);i=null;var s=function(){var t=2091639*e+2.3283064365386963e-10*o;return e=n,n=r,r=t-(o=0|t)};return s.uint32=function(){return 4294967296*s()},s.fract53=function(){return s()+1.1102230246251565e-16*(2097152*s()|0)},s.version="Alea 0.9",s.args=t,s}(Array.prototype.slice.call(arguments))}()}();t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*r()|0;return("x"==t?e:3&e|8).toString(16)})}},function(t,e){t.exports=Promise},function(t,e,n){"use strict";(function(e){function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var i=n(28),c=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a="foo"===function(){}.name;function u(t){return Object.prototype.toString.call(t)}function f(t){return!o(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var l=t.exports=g,p=/\s*function\s+([^\(\s]*)\s*/;function d(t){if(i.isFunction(t)){if(a)return t.name;var e=t.toString().match(p);return e&&e[1]}}function h(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function y(t){if(a||!i.isFunction(t))return i.inspect(t);var e=d(t);return"[Function"+(e?": "+e:"")+"]"}function v(t,e,n,r,o){throw new l.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function g(t,e){t||v(t,!0,e,"==",l.ok)}function m(t,e,n,c){if(t===e)return!0;if(o(t)&&o(e))return 0===r(t,e);if(i.isDate(t)&&i.isDate(e))return t.getTime()===e.getTime();if(i.isRegExp(t)&&i.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(f(t)&&f(e)&&u(t)===u(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;var a=(c=c||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===c.expected.indexOf(e)||(c.actual.push(t),c.expected.push(e),function(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(i.isPrimitive(t)||i.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=b(t),c=b(e);if(o&&!c||!o&&c)return!1;if(o)return t=s.call(t),e=s.call(e),m(t,e,n);var a,u,f=j(t),l=j(e);if(f.length!==l.length)return!1;for(f.sort(),l.sort(),u=f.length-1;u>=0;u--)if(f[u]!==l[u])return!1;for(u=f.length-1;u>=0;u--)if(a=f[u],!m(t[a],e[a],n,r))return!1;return!0}(t,e,n,c))}return n?t===e:t==e}function b(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function w(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,n,r){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&v(o,n,"Missing expected exception"+r);var c="string"==typeof r,s=!t&&i.isError(o),a=!t&&o&&!n;if((s&&c&&w(o,n)||a)&&v(o,n,"Got unwanted exception"+r),t&&o&&n&&!w(o,n)||!t&&o)throw o}l.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=h(y((e=this).actual),128)+" "+e.operator+" "+h(y(e.expected),128),this.generatedMessage=!0);var n=t.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var o=r.stack,i=d(n),c=o.indexOf("\n"+i);if(c>=0){var s=o.indexOf("\n",c+1);o=o.substring(s+1)}this.stack=o}}},i.inherits(l.AssertionError,Error),l.fail=v,l.ok=g,l.equal=function(t,e,n){t!=e&&v(t,e,n,"==",l.equal)},l.notEqual=function(t,e,n){t==e&&v(t,e,n,"!=",l.notEqual)},l.deepEqual=function(t,e,n){m(t,e,!1)||v(t,e,n,"deepEqual",l.deepEqual)},l.deepStrictEqual=function(t,e,n){m(t,e,!0)||v(t,e,n,"deepStrictEqual",l.deepStrictEqual)},l.notDeepEqual=function(t,e,n){m(t,e,!1)&&v(t,e,n,"notDeepEqual",l.notDeepEqual)},l.notDeepStrictEqual=function t(e,n,r){m(e,n,!0)&&v(e,n,r,"notDeepStrictEqual",t)},l.strictEqual=function(t,e,n){t!==e&&v(t,e,n,"===",l.strictEqual)},l.notStrictEqual=function(t,e,n){t===e&&v(t,e,n,"!==",l.notStrictEqual)},l.throws=function(t,e,n){x(!0,t,e,n)},l.doesNotThrow=function(t,e,n){x(!1,t,e,n)},l.ifError=function(t){if(t)throw t};var j=Object.keys||function(t){var e=[];for(var n in t)c.call(t,n)&&e.push(n);return e}}).call(e,n(3))},function(t,e,n){(function(t,r){var o=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,c=String(t).replace(o,function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),a=r[n];n<i;a=r[++n])y(a)||!w(a)?c+=" "+a:c+=" "+s(a);return c},e.deprecate=function(n,o){if(m(t.process))return function(){return e.deprecate(n,o).apply(this,arguments)};if(!0===r.noDeprecation)return n;var i=!1;return function(){if(!i){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),i=!0}return n.apply(this,arguments)}};var i,c={};function s(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&e._extend(r,n),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),f(r,t,r.depth)}function a(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function u(t,e){return t}function f(t,n,r){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return g(o)||(o=f(t,o,r)),o}var i=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(v(e))return t.stylize(""+e,"number");if(h(e))return t.stylize(""+e,"boolean");if(y(e))return t.stylize("null","null")}(t,n);if(i)return i;var c=Object.keys(n),s=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(c);if(t.showHidden&&(c=Object.getOwnPropertyNames(n)),j(n)&&(c.indexOf("message")>=0||c.indexOf("description")>=0))return l(n);if(0===c.length){if(O(n)){var a=n.name?": "+n.name:"";return t.stylize("[Function"+a+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return t.stylize(Date.prototype.toString.call(n),"date");if(j(n))return l(n)}var u,w="",E=!1,S=["{","}"];(d(n)&&(E=!0,S=["[","]"]),O(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(w=" "+RegExp.prototype.toString.call(n)),x(n)&&(w=" "+Date.prototype.toUTCString.call(n)),j(n)&&(w=" "+l(n)),0!==c.length||E&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=E?function(t,e,n,r,o){for(var i=[],c=0,s=e.length;c<s;++c)k(e,String(c))?i.push(p(t,e,n,r,String(c),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(p(t,e,n,r,o,!0))}),i}(t,n,r,s,c):c.map(function(e){return p(t,n,r,s,e,E)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(u,w,S)):S[0]+w+S[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,o,i){var c,s,a;if((a=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?s=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(s=t.stylize("[Setter]","special")),k(r,o)||(c="["+o+"]"),s||(t.seen.indexOf(a.value)<0?(s=y(n)?f(t,a.value,null):f(t,a.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),m(c)){if(i&&o.match(/^\d+$/))return s;(c=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(c=c.substr(1,c.length-2),c=t.stylize(c,"name")):(c=c.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),c=t.stylize(c,"string"))}return c+": "+s}function d(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return"number"==typeof t}function g(t){return"string"==typeof t}function m(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===E(t)}function w(t){return"object"==typeof t&&null!==t}function x(t){return w(t)&&"[object Date]"===E(t)}function j(t){return w(t)&&("[object Error]"===E(t)||t instanceof Error)}function O(t){return"function"==typeof t}function E(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(m(i)&&(i=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!c[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var n=r.pid;c[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else c[t]=function(){};return c[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=h,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=b,e.isObject=w,e.isDate=x,e.isError=j,e.isFunction=O,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(30);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(t=new Date,n=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":"),[t.getDate(),_[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(31),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,n(3),n(29))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:c}catch(t){r=c}}();var a,u=[],f=!1,l=-1;function p(){f&&a&&(f=!1,a.length?u=a.concat(u):l=-1,u.length&&d())}function d(){if(!f){var t=s(p);f=!0;for(var e=u.length;e;){for(a=u,u=[];++l<e;)a&&a[l].run();l=-1,e=u.length}a=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===c||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||f||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return t?/windows phone/i.test(t)?"Windows Phone":/android/i.test(t)?"Android":/iPad|iPhone|iPod/.test(t)&&!window.MSStream?"iOS":"Desktop":null}},function(t,e,n){const r=n(9),o=n(34);n(12);"undefined"!=typeof self&&self.registration&&self.registration.sync&&self.addEventListener("sync",t=>{"analytics_sync"===t.tag&&(console.info("Running analytics sync task..."),t.waitUntil(c()))});let i=!1;const c=function(){return!0===i?Promise.resolve():(console.info("Running analytics sync..."),i=!0,r.getAllPendingCalls().then(t=>{if(0===t.length)return!1;let e=t.slice(0,20);return function(t){if(0===t.length)return Promise.resolve(!0);let e="https://www.google-analytics.com/";1===t.length?e+="collect":e+="batch";let n=t.map(t=>o.stringify(t.call)).join("\n");return fetch(e,{method:"POST",body:n}).then(t=>200===t.status)}(e).then(t=>!1!==t&&r.deleteEvents(e).then(()=>!0))}).then(t=>{if(i=!1,t)return c()}).catch(t=>{}))};t.exports=c},function(t,e,n){"use strict";var r=n(35),o=n(13);function i(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t,e){var n=function(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return function(t,n,r){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};default:return function(t,e,n){void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e=o({arrayFormat:"none"},e)),r=Object.create(null);return"string"!=typeof t?r:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),o=e.shift(),i=e.length>0?e.join("="):void 0;i=void 0===i?null:decodeURIComponent(i),n(decodeURIComponent(o),i,r)}),Object.keys(r).sort().reduce(function(t,e){var n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(n):t[e]=n,t},Object.create(null))):r},e.stringify=function(t,e){var n=function(t){switch(t.arrayFormat){case"index":return function(e,n,r){return null===n?[i(e,t),"[",r,"]"].join(""):[i(e,t),"[",i(r,t),"]=",i(n,t)].join("")};case"bracket":return function(e,n){return null===n?i(e,t):[i(e,t),"[]=",i(n,t)].join("")};default:return function(e,n){return null===n?i(e,t):[i(e,t),"=",i(n,t)].join("")}}}(e=o({encode:!0,strict:!0,arrayFormat:"none"},e));return t?Object.keys(t).sort().map(function(r){var o=t[r];if(void 0===o)return"";if(null===o)return i(r,e);if(Array.isArray(o)){var c=[];return o.slice().forEach(function(t){void 0!==t&&c.push(n(r,t,c.length))}),c.join("&")}return i(r,e)+"="+i(o,e)}).filter(function(t){return t.length>0}).join("&"):""}},function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(14),i=n(46),c=n(1),s=n(51);self.addEventListener("install",t=>{t.waitUntil(Promise.all([function(){return r.a(this,void 0,void 0,function*(){return console.warn("Disabled all caching for launch")})}(),self.skipWaiting()]))}),self.addEventListener("activate",t=>{t.waitUntil(function(){return r.a(this,void 0,void 0,function*(){yield self.clients.claim(),(yield self.clients.matchAll()).forEach(t=>t.postMessage({command:"reload-if",buildTime:1530688223518}))})}())}),o.a.listen(),Object(s.d)(),o.a.bind("fire-worker-command",t=>Object(s.b)(t)),o.a.bind("get-notifications",t=>r.a(this,void 0,void 0,function*(){return(yield self.registration.getNotifications()).map(t=>({title:t.title,body:t.body,icon:t.icon,data:t.data}))})),Object(s.c)("podmod.openphoto",t=>r.a(this,void 0,void 0,function*(){(yield self.clients.matchAll()).forEach(e=>e.postMessage({command:"podmod.openphoto",url:t.url}))})),Object(s.c)("podmod.closephoto",()=>r.a(this,void 0,void 0,function*(){(yield self.clients.matchAll()).forEach(t=>t.postMessage({command:"podmod.closephoto"}))})),Object(s.a)("notification.show",t=>{Object(c.a)("Notification","Shows",t.body)}),Object(s.a)("notification.process-click",(t,e)=>{if(!e)throw new Error("No notification event?");e&&e.action?Object(c.a)("Notification",e.action+" CTA",e.notification.body):Object(c.a)("Notification","Taps",e.notification.body)}),Object(i.b)({key:"",host:""}),o.a.bind("get-subscribed-topics",()=>(console.info("WORKER: getting subscribed topics from pushkin"),Object(i.a)().then(t=>(console.log("got topics!",t),t)).catch(t=>{throw console.error(t),t}))),o.a.bind("push-subscribe",t=>Object(i.c)(t)),o.a.bind("push-unsubscribe",t=>Object(i.d)(t))},function(t,e,n){"use strict";e.b=function(t){var e=t.key,n=t.host;s.key=e,s.host=n},e.c=function(t){var e={lzCapable:!0};t.confirmationPayload&&(e.confirmation_notification={ttl:60,payload:t.confirmationPayload,service_worker_url:self.location.href,priority:"high",ios:t.confirmationIOS});return f().then(function(n){return a("/topics/"+t.topic+"/subscribers/"+encodeURIComponent(n),"POST",e).then(function(e){return i.put({topic_id:t.topic,subscribeDate:Date.now()}).then(function(){return e})})})},e.d=function(t){return f().then(function(e){return a("/topics/"+t.topic+"/subscribers/"+encodeURIComponent(e),"DELETE",t)}).then(function(){return i.del(t.topic)})},e.a=function(){return u().then(function(){return i.all()}).then(function(t){return t.map(function(t){return t.topic_id})})};var r=n(47),o=n(50),i=(function(){}(),r.a.store("subscriptions")),c=r.a.store("config"),s={};function a(t,e,n){if(void 0===e&&(e="GET"),void 0===n&&(n=null),!s.key||!s.host)throw new Error("Must set config variables");var r=new Headers;return r.set("Authorization",s.key),r.set("Content-Type","application/json"),fetch(s.host+t,{method:e,mode:"cors",headers:r,body:n?JSON.stringify(n):null}).then(function(t){return!t.status||t.status<200||t.status>299?t.text().then(function(t){throw new Error(t)}):t.json().then(function(t){if(t.errorMessage)throw new Error(t.errorMessage);return t})})}function u(){return Promise.all([c.get("subscription-data"),self.registration.pushManager.getSubscription()]).then(function(t){var e=t[0],n=t[1],r=n?JSON.stringify(n):void 0;return e&&e.value!==r?(console.warn("Subscription data has changed, wiping existing subscription records"),i.clear().then(function(){return n})):n}).then(function(t){return t||self.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o.a})}).then(function(t){return c.put({name:"subscription-data",value:JSON.stringify(t)}).then(function(){return t})})}function f(){return u().then(function(t){if(!t)throw new Error("No subscription to check");return a("/registrations","POST",{subscription:t}).then(function(t){return c.put({name:"cached-subscription-id",value:t.id}).then(function(){return t.id})})})}},function(t,e,n){"use strict";var r=n(15),o=n.n(r),i=n(48),c=n.n(i),s=o.a.schema().version(1).addStore("subscriptions",{key:"topic_id"}).version(2).addStore("config",{key:"name"});e.a=o()("pushkin-client",s).use(c()())},function(t,e,n){const r=n(49);t.exports=function(){return function(t){s(t,o),Object.keys(t.stores).forEach(function(e){var n=t.store(e);s(n,i),Object.keys(n.indexes).forEach(function(t){var e=n.index(t);s(e,c)})})}};var o=["drop","close"],i=["put","get","del","count","clear","batch","all"],c=["get","count"];function s(t,e){e.forEach(function(e){t[e]=r(t[e])})}},function(t,e,n){"use strict";t.exports=function(t,e){return"number"==typeof e&&e!==1/0?function(t,e){for(var n=[],o=0;o<e;o++)n.push("a"+o);var i=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([r]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(Promise,t)}(t,e):function(t){for(var e=Math.max(t.length-1,3),n=[],o=0;o<e;o++)n.push("a"+o);var i=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+r+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(t,e){return"case "+e+":res = fn.call("+["self"].concat(n.slice(0,e)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(Promise,t)}(t)};var r="function (err, res) {if (err) { rj(err); } else { rs(res); }}"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110])},function(t,e,n){"use strict";n.d(e,"d",function(){return k}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return a});var r={},o={};function i(t,e){if(r[t])throw new Error("Cannot add command '"+t+"', it already exists.");r[t]=e}function c(t,e){var n=t.command,i=t.options;if(!r[n])throw new Error("No such command '"+n+"'");return o[n]&&o[n].forEach(function(t){return t(i,e)}),r[n](i,e)}function s(t,e){return t instanceof Array?Promise.all(t.map(function(t){return c(t,e)})):c(t,e)}function a(t,e){o[t]||(o[t]=new Set),o[t].add(e)}function u(t,e,n,r){return new(n||(n=Promise))(function(o,i){function c(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(c,s)}a((r=r.apply(t,e||[])).next())})}function f(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function l(t){return u(this,void 0,void 0,function(){var e,n,r;return f(this,function(o){switch(o.label){case 0:if(!t.title||!t.body)throw new Error("Notification must, at at a minimum, provide title and body.");return e=t.title,n=t.events,(r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n}(t,["title","events"])).data=Object.assign(r.data||{},{__workerCommandNotification:!0,__events:n}),[4,self.registration.showNotification(e,r)];case 1:return o.sent(),[2]}})})}function p(t,e){return u(this,void 0,void 0,function(){var n;return f(this,function(r){switch(r.label){case 0:if(!(n=t?t.tag:void 0)&&e)e.notification.close();else if(!n)throw new Error("Must provide a notificationevent or tag to remove notification");return[4,self.registration.getNotifications({tag:n})];case 1:return r.sent().forEach(function(t){!0===y(t)&&t.close()}),[2]}})})}function d(t,e){return u(this,void 0,void 0,function(){var t,n,r;return f(this,function(o){switch(o.label){case 0:if(!e)throw new Error("Cannot process notification click without also sending event");return!1===y(t=e.notification)?[2]:t.data.__events?(n="click",e.action&&(n=e.action),(r=t.data.__events["on"+n])?[4,s(r,e)]:(console.error("Notification received on"+n+" event, but no listener was attached"),[2])):(console.warn("Notification received a click event but has no events attached."),[2]);case 1:return o.sent(),[2]}})})}function h(t,e){return u(this,void 0,void 0,function(){var t;return f(this,function(n){switch(n.label){case 0:if(!e)throw new Error("Cannot process notification click without also sending event");return!1===y(t=e.notification)?[2]:t.data.__events&&t.data.__events.onclose?[4,s(t.data.__events.onclose,e)]:(console.info("Notification received a close event with no events attached."),[2]);case 1:return n.sent(),[2]}})})}function y(t){return t.data&&!0===t.data.__workerCommandNotification}function v(t,e){var n=new URL(t);return!0===e.ignoreQuery&&(n.search=""),!0===e.ignoreHash&&(n.hash=""),n.href}function g(t,e){return u(this,void 0,void 0,function(){var n;return f(this,function(r){switch(r.label){case 0:return[4,self.clients.matchAll({includeUncontrolled:!0})];case 1:return n=r.sent(),v(t,e),[2,n.find(function(n){return v(n.url,e)===t&&n instanceof WindowClient})]}})})}function m(t){return u(this,void 0,void 0,function(){var e,n,r,o;return f(this,function(i){switch(i.label){case 0:return t&&t.url?[3,3]:[4,self.clients.matchAll()];case 1:if(e=i.sent(),!(n=e.find(function(t){return t instanceof WindowClient})))throw new Error("Tried to focus, but there were no client windows");return[4,n.focus()];case 2:return i.sent(),[2];case 3:return[4,g(r=new URL(t.url,self.location.href).href,t)];case 4:return(o=i.sent())?[4,o.focus()]:[3,6];case 5:return i.sent(),[3,9];case 6:return!0!==t.openIfNotExisting?[3,8]:[4,self.clients.openWindow(r)];case 7:return i.sent(),[3,9];case 8:console.error("Tried to focus a window that didn't exist! "+r),i.label=9;case 9:return[2]}})})}function b(t){return u(this,void 0,void 0,function(){var e,n;return f(this,function(r){switch(r.label){case 0:return e=new URL(t.url,self.location.href).href,t.focusIfExisting?[3,2]:[4,self.clients.openWindow(t.url)];case 1:return r.sent(),[3,7];case 2:return[4,g(e,t)];case 3:return(n=r.sent())?[4,n.focus()]:[3,5];case 4:return r.sent(),[3,7];case 5:return[4,self.clients.openWindow(t.url)];case 6:r.sent(),r.label=7;case 7:return[2]}})})}function w(t){return u(this,void 0,void 0,function(){var e;return f(this,function(n){switch(n.label){case 0:return[4,self.clients.matchAll()];case 1:return e=n.sent(),t.url&&(e=e.filter(function(e){return e.url===t.url})),e.forEach(function(e){return e.postMessage(t.message)}),[2]}})})}function x(){return u(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,self.registration.update()];case 1:return t.sent(),[2]}})})}function j(){return u(this,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,self.registration.unregister()];case 1:return t.sent(),[2]}})})}function O(){self.addEventListener("push",function(t){t.waitUntil(function(t){return u(this,void 0,void 0,function(){var e;return f(this,function(n){switch(n.label){case 0:return t.data?[4,t.data.json()]:[2];case 1:return(e=n.sent()).data&&e.data.payload?(e=JSON.parse(e.data.payload),[3,4]):[3,2];case 2:return e.notification&&e.data&&e.data.__isWorkerCommandPayload?(console.info("Received Firebase notification payload"),[4,s({command:"notification.show",options:e.notification})]):[3,4];case 3:return n.sent(),[2];case 4:return e.__workerCommandPayload?(console.info("Received push payload",e.__workerCommandPayload),[4,s(e.__workerCommandPayload)]):[2];case 5:return n.sent(),[2]}})})}(t))})}function E(t){return u(this,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:if(!t)throw new Error("Options not provided");if(!t.cacheName)throw new Error("Cache name not provided");if(!t.urls)throw new Error("Cache URLs not provided");return[4,caches.open(t.cacheName)];case 1:return[2,e.sent().addAll(t.urls)]}})})}function S(t){return u(this,void 0,void 0,function(){var e,n;return f(this,function(r){switch(r.label){case 0:if(!t)throw new Error("Options not provided");if(t.urls&&!0===t.deleteWholeCache)throw new Error("Cannot specify both urls and deleteWholeCache options");if(!t.cacheName)throw new Error("Cache name not provided");if(!0===t.deleteWholeCache)return[2,caches.delete(t.cacheName)];if(!t.urls)throw new Error("Must provide URLs if not using deleteWholeCache");return[4,caches.open(t.cacheName)];case 1:return e=r.sent(),n=t.urls.map(function(t){return e.delete(t)}),[2,Promise.all(n)]}})})}var _="__workerCommandPayload";function k(){i("notification.show",l),i("notification.close",p),i("notification.process-click",d),i("notification.process-close",h),self.addEventListener("notificationclick",function(t){t.waitUntil(s({command:"notification.process-click"},t))}),self.addEventListener("notificationclose",function(t){t.waitUntil(s({command:"notification.process-close"},t))}),i("client.focus",m),i("client.open",b),i("client.post-message",w),i("registration.update",x),i("registration.unregister",j),O(),i("cache.add",E),i("cache.delete",S),function(){var t=this;self.addEventListener("message",function(e){return u(t,void 0,void 0,function(){var t,n,r,o;return f(this,function(i){switch(i.label){case 0:if(!(t=e).data||!t.data[_])return[2];if(!(n=t.ports[0]))throw new Error("Send worker command payload with no reply port");i.label=1;case 1:return i.trys.push([1,3,,4]),[4,s(t.data[_])];case 2:return r=i.sent(),n.postMessage([null,r]),[3,4];case 3:return o=i.sent(),n.postMessage([o.message,null]),[3,4];case 4:return[2]}})})})}()}}]);